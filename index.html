<!DOCTYPE html>
<html>
  <head>
    <title>service_index</title>
    <link rel="stylesheet" href="./lib/reset.css">
    <script src="./lib/vue@3.2.36.global.prod.js"></script>
  <style>
.service_list{
  font-size: 3rem;
}
  </style>
</head>
<body>
<div class="app">
<!-- urlListをul liでリスト表示してhrefで飛べるようにする -->
<ul>
  <li v-for="url, idx in urlList" class="service_list">
    <a :href="url">{{serviceList[idx]['name']}}: {{serviceList[idx]['desc']}}</a>
  </li>
</ul>
</div>
</body>
<script>
const app = Vue.createApp({
data() {
    return {
serviceList: [
  {'name': 'q_a', 'desc': 'flash card: Question Answer'},
  {'name': 'f_i_b', 'desc': 'fill in blank question: Fill In Blank'},
  {'name': 'i_t_n', 'desc': 'flash card with image: Image To Name'},
  // portal(portal.html)
  {'name': 'portal', 'desc': 'portal page: Portal'},

],
urlList: [],
    }
},
// watch: {
//    any: {
//      handler() {
//      },
//      deep: true
//    },
// },
beforeMounte(){
},
mounted() {
  this.loadSites();
},
beforeUpdate() {
},
updated() {
},
methods: {
    loadSites() {
      // getBaseURL()でurlListを更新する
      this.urlList = this.serviceList.map(it => getBaseURL() + '/' + it['name'] + '.html');
      return this.urlList;
    },

},
}).mount('.app');

// テスト環境でも本番環境でも動く
// http://127.0.0.1:3000/ or https://taroyanaka.github.io/q_a/ を想定
function getBaseURL() {
  const url = window.location.href;
  const baseURL = new URL(url).origin;
  return baseURL;
}
let tapCount = 0;
let lastTapTime = 0;
document.addEventListener('touchend', function(event) {
  const currentTime = new Date().getTime();
  const tapTime = currentTime - lastTapTime;
  if (tapTime < 500 && tapCount === 2) {
    // トリプルタップ
    console.log('トリプルタップ');
    window.location.href = 'portal.html';
    tapCount = 0;
  } else if (tapTime < 500) {
    tapCount++;
  } else {
    tapCount = 1;
  }
  lastTapTime = currentTime;
});
function go_to_portal_page(){
  window.location.href = 'portal.html';
};

</script>
</html>
